<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Real world data | R: an introduction to data management and analysis</title>
  <meta name="description" content="The handbook for the Osa Conservation R and biodiversity analysis course." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Real world data | R: an introduction to data management and analysis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The handbook for the Osa Conservation R and biodiversity analysis course." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Real world data | R: an introduction to data management and analysis" />
  
  <meta name="twitter:description" content="The handbook for the Osa Conservation R and biodiversity analysis course." />
  

<meta name="author" content="Chris Beirne" />


<meta name="date" content="2020-12-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="advanced-coding.html"/>
<link rel="next" href="introduction-to-modelling.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i><b>2</b> Setup</a><ul>
<li class="chapter" data-level="2.1" data-path="setup.html"><a href="setup.html#notation"><i class="fa fa-check"></i><b>2.1</b> Notation</a></li>
<li class="chapter" data-level="2.2" data-path="setup.html"><a href="setup.html#download-and-open-r"><i class="fa fa-check"></i><b>2.2</b> Download and open R</a></li>
<li class="chapter" data-level="2.3" data-path="setup.html"><a href="setup.html#download-and-open-r-studio"><i class="fa fa-check"></i><b>2.3</b> Download and open R Studio</a></li>
<li class="chapter" data-level="2.4" data-path="setup.html"><a href="setup.html#setting-up-r-studio-to-be-productive"><i class="fa fa-check"></i><b>2.4</b> Setting up R Studio to be productive</a><ul>
<li class="chapter" data-level="2.4.1" data-path="setup.html"><a href="setup.html#r-projects"><i class="fa fa-check"></i><b>2.4.1</b> R Projects</a></li>
<li class="chapter" data-level="2.4.2" data-path="setup.html"><a href="setup.html#create-a-data-sheet-to-save-your-code"><i class="fa fa-check"></i><b>2.4.2</b> Create a data sheet to save your code</a></li>
<li class="chapter" data-level="2.4.3" data-path="setup.html"><a href="setup.html#name-your-files"><i class="fa fa-check"></i><b>2.4.3</b> Name your files</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="setup.html"><a href="setup.html#first-steps"><i class="fa fa-check"></i><b>2.5</b> First Steps</a><ul>
<li class="chapter" data-level="2.5.1" data-path="setup.html"><a href="setup.html#veiwing-data"><i class="fa fa-check"></i><b>2.5.1</b> Veiwing Data</a></li>
<li class="chapter" data-level="2.5.2" data-path="setup.html"><a href="setup.html#data-summaries"><i class="fa fa-check"></i><b>2.5.2</b> Data summaries</a></li>
<li class="chapter" data-level="2.5.3" data-path="setup.html"><a href="setup.html#plot-your-data"><i class="fa fa-check"></i><b>2.5.3</b> Plot your data</a></li>
<li class="chapter" data-level="2.5.4" data-path="setup.html"><a href="setup.html#test-your-hypotheses"><i class="fa fa-check"></i><b>2.5.4</b> Test your hypotheses</a></li>
<li class="chapter" data-level="2.5.5" data-path="setup.html"><a href="setup.html#regression-analysis"><i class="fa fa-check"></i><b>2.5.5</b> Regression analysis</a></li>
<li class="chapter" data-level="2.5.6" data-path="setup.html"><a href="setup.html#congratulations"><i class="fa fa-check"></i><b>2.5.6</b> Congratulations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>3</b> R Basics</a><ul>
<li class="chapter" data-level="3.1" data-path="r-basics.html"><a href="r-basics.html#quick-glossary"><i class="fa fa-check"></i><b>3.1</b> Quick Glossary</a></li>
<li class="chapter" data-level="3.2" data-path="r-basics.html"><a href="r-basics.html#objects-and-functions"><i class="fa fa-check"></i><b>3.2</b> Objects and functions</a></li>
<li class="chapter" data-level="3.3" data-path="r-basics.html"><a href="r-basics.html#r-as-a-calculator"><i class="fa fa-check"></i><b>3.3</b> R as a calculator</a></li>
<li class="chapter" data-level="3.4" data-path="r-basics.html"><a href="r-basics.html#assigning-single-values-a.k.a.-scalars"><i class="fa fa-check"></i><b>3.4</b> Assigning single values (a.k.a. scalars)</a></li>
<li class="chapter" data-level="3.5" data-path="r-basics.html"><a href="r-basics.html#assigning-multiple-values"><i class="fa fa-check"></i><b>3.5</b> Assigning multiple values</a><ul>
<li class="chapter" data-level="3.5.1" data-path="r-basics.html"><a href="r-basics.html#concatenation-a.k.a.-vectors"><i class="fa fa-check"></i><b>3.5.1</b> Concatenation (a.k.a. vectors)</a></li>
<li class="chapter" data-level="3.5.2" data-path="r-basics.html"><a href="r-basics.html#sequences"><i class="fa fa-check"></i><b>3.5.2</b> Sequences</a></li>
<li class="chapter" data-level="3.5.3" data-path="r-basics.html"><a href="r-basics.html#vector-arithmatic"><i class="fa fa-check"></i><b>3.5.3</b> Vector Arithmatic</a></li>
<li class="chapter" data-level="3.5.4" data-path="r-basics.html"><a href="r-basics.html#vector-summaries"><i class="fa fa-check"></i><b>3.5.4</b> Vector Summaries</a></li>
<li class="chapter" data-level="3.5.5" data-path="r-basics.html"><a href="r-basics.html#ordering-and-manipulating-vectors"><i class="fa fa-check"></i><b>3.5.5</b> Ordering and manipulating vectors</a></li>
<li class="chapter" data-level="3.5.6" data-path="r-basics.html"><a href="r-basics.html#removing-objects-from-the-workspace"><i class="fa fa-check"></i><b>3.5.6</b> Removing objects from the workspace</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="r-basics.html"><a href="r-basics.html#quitting-r"><i class="fa fa-check"></i><b>3.6</b> Quitting R</a></li>
<li class="chapter" data-level="3.7" data-path="r-basics.html"><a href="r-basics.html#packages"><i class="fa fa-check"></i><b>3.7</b> Packages</a><ul>
<li class="chapter" data-level="3.7.1" data-path="r-basics.html"><a href="r-basics.html#install-your-first-package"><i class="fa fa-check"></i><b>3.7.1</b> Install your first package</a></li>
<li class="chapter" data-level="3.7.2" data-path="r-basics.html"><a href="r-basics.html#loading-a-package"><i class="fa fa-check"></i><b>3.7.2</b> Loading a package</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="r-basics.html"><a href="r-basics.html#getting-help"><i class="fa fa-check"></i><b>3.8</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="advanced-coding.html"><a href="advanced-coding.html"><i class="fa fa-check"></i><b>4</b> Advanced coding</a><ul>
<li class="chapter" data-level="4.1" data-path="advanced-coding.html"><a href="advanced-coding.html#classes-of-data"><i class="fa fa-check"></i><b>4.1</b> Classes of data</a><ul>
<li class="chapter" data-level="4.1.1" data-path="advanced-coding.html"><a href="advanced-coding.html#numbers"><i class="fa fa-check"></i><b>4.1.1</b> Numbers</a></li>
<li class="chapter" data-level="4.1.2" data-path="advanced-coding.html"><a href="advanced-coding.html#strings"><i class="fa fa-check"></i><b>4.1.2</b> Strings</a></li>
<li class="chapter" data-level="4.1.3" data-path="advanced-coding.html"><a href="advanced-coding.html#characters"><i class="fa fa-check"></i><b>4.1.3</b> Characters</a></li>
<li class="chapter" data-level="4.1.4" data-path="advanced-coding.html"><a href="advanced-coding.html#factors"><i class="fa fa-check"></i><b>4.1.4</b> Factors</a></li>
<li class="chapter" data-level="4.1.5" data-path="advanced-coding.html"><a href="advanced-coding.html#changing-data-structure"><i class="fa fa-check"></i><b>4.1.5</b> Changing data structure</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="advanced-coding.html"><a href="advanced-coding.html#dataframes"><i class="fa fa-check"></i><b>4.2</b> Dataframes</a><ul>
<li class="chapter" data-level="4.2.1" data-path="advanced-coding.html"><a href="advanced-coding.html#exploring-dataframes"><i class="fa fa-check"></i><b>4.2.1</b> Exploring dataframes</a></li>
<li class="chapter" data-level="4.2.2" data-path="advanced-coding.html"><a href="advanced-coding.html#numerical-summaries"><i class="fa fa-check"></i><b>4.2.2</b> Numerical Summaries</a></li>
<li class="chapter" data-level="4.2.3" data-path="advanced-coding.html"><a href="advanced-coding.html#selecting-entries-in-a-dataframe"><i class="fa fa-check"></i><b>4.2.3</b> Selecting entries in a dataframe</a></li>
<li class="chapter" data-level="4.2.4" data-path="advanced-coding.html"><a href="advanced-coding.html#dplyr-and-data-summaries"><i class="fa fa-check"></i><b>4.2.4</b> dplyr and data summaries</a></li>
<li class="chapter" data-level="4.2.5" data-path="advanced-coding.html"><a href="advanced-coding.html#merging-dataframes"><i class="fa fa-check"></i><b>4.2.5</b> Merging dataframes</a></li>
<li class="chapter" data-level="4.2.6" data-path="advanced-coding.html"><a href="advanced-coding.html#exporting-dataframes"><i class="fa fa-check"></i><b>4.2.6</b> Exporting dataframes</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="advanced-coding.html"><a href="advanced-coding.html#plots"><i class="fa fa-check"></i><b>4.3</b> Plots</a><ul>
<li class="chapter" data-level="4.3.1" data-path="advanced-coding.html"><a href="advanced-coding.html#scatter-plots"><i class="fa fa-check"></i><b>4.3.1</b> Scatter plots</a></li>
<li class="chapter" data-level="4.3.2" data-path="advanced-coding.html"><a href="advanced-coding.html#exporting-graphs"><i class="fa fa-check"></i><b>4.3.2</b> Exporting Graphs</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="advanced-coding.html"><a href="advanced-coding.html#merging-columns"><i class="fa fa-check"></i><b>4.4</b> Merging columns</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="real-world-data.html"><a href="real-world-data.html"><i class="fa fa-check"></i><b>5</b> Real world data</a><ul>
<li class="chapter" data-level="5.1" data-path="real-world-data.html"><a href="real-world-data.html#data-organisation"><i class="fa fa-check"></i><b>5.1</b> Data organisation</a><ul>
<li class="chapter" data-level="5.1.1" data-path="real-world-data.html"><a href="real-world-data.html#the-10-database-commandments"><i class="fa fa-check"></i><b>5.1.1</b> The 10 database commandments</a></li>
<li class="chapter" data-level="5.1.2" data-path="real-world-data.html"><a href="real-world-data.html#my-database-setup"><i class="fa fa-check"></i><b>5.1.2</b> My database setup</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="real-world-data.html"><a href="real-world-data.html#osa-data"><i class="fa fa-check"></i><b>5.2</b> Osa data</a></li>
<li class="chapter" data-level="5.3" data-path="real-world-data.html"><a href="real-world-data.html#importing-a-dataframe-into-r-from-excel"><i class="fa fa-check"></i><b>5.3</b> Importing a dataframe into R from excel</a></li>
<li class="chapter" data-level="5.4" data-path="real-world-data.html"><a href="real-world-data.html#effort-exploration"><i class="fa fa-check"></i><b>5.4</b> Effort exploration</a><ul>
<li class="chapter" data-level="5.4.1" data-path="real-world-data.html"><a href="real-world-data.html#dealing-with-dates"><i class="fa fa-check"></i><b>5.4.1</b> Dealing with dates</a></li>
<li class="chapter" data-level="5.4.2" data-path="real-world-data.html"><a href="real-world-data.html#remove-cameras-that-did-not-function"><i class="fa fa-check"></i><b>5.4.2</b> Remove cameras that did not function</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="real-world-data.html"><a href="real-world-data.html#covariate-data"><i class="fa fa-check"></i><b>5.5</b> Covariate data</a><ul>
<li class="chapter" data-level="5.5.1" data-path="real-world-data.html"><a href="real-world-data.html#plotting-your-survey-sites---substr"><i class="fa fa-check"></i><b>5.5.1</b> Plotting your survey sites - Substr()</a></li>
<li class="chapter" data-level="5.5.2" data-path="real-world-data.html"><a href="real-world-data.html#explore-your-covariates"><i class="fa fa-check"></i><b>5.5.2</b> Explore your covariates</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="real-world-data.html"><a href="real-world-data.html#camera-trap-data"><i class="fa fa-check"></i><b>5.6</b> Camera trap data</a><ul>
<li class="chapter" data-level="5.6.1" data-path="real-world-data.html"><a href="real-world-data.html#subsetting-you-data-to-only-include-species-of-interest."><i class="fa fa-check"></i><b>5.6.1</b> Subsetting you data to only include species of interest.</a></li>
<li class="chapter" data-level="5.6.2" data-path="real-world-data.html"><a href="real-world-data.html#extracting-time-and-date-information"><i class="fa fa-check"></i><b>5.6.2</b> Extracting time and date information</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="real-world-data.html"><a href="real-world-data.html#building-analysis-dataframes"><i class="fa fa-check"></i><b>5.7</b> Building analysis dataframes</a><ul>
<li class="chapter" data-level="5.7.1" data-path="real-world-data.html"><a href="real-world-data.html#relative-abundance"><i class="fa fa-check"></i><b>5.7.1</b> Relative abundance</a></li>
<li class="chapter" data-level="5.7.2" data-path="real-world-data.html"><a href="real-world-data.html#step-1-summarise"><i class="fa fa-check"></i><b>5.7.2</b> Step 1: Summarise</a></li>
<li class="chapter" data-level="5.7.3" data-path="real-world-data.html"><a href="real-world-data.html#step-2-merge-with-effort"><i class="fa fa-check"></i><b>5.7.3</b> Step 2: Merge with effort</a></li>
<li class="chapter" data-level="5.7.4" data-path="real-world-data.html"><a href="real-world-data.html#step-3-merge-the-covariates"><i class="fa fa-check"></i><b>5.7.4</b> Step 3: Merge the covariates</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="real-world-data.html"><a href="real-world-data.html#real-data-exploration"><i class="fa fa-check"></i><b>5.8</b> Real data exploration</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="introduction-to-modelling.html"><a href="introduction-to-modelling.html"><i class="fa fa-check"></i><b>6</b> Introduction to Modelling</a><ul>
<li class="chapter" data-level="6.1" data-path="introduction-to-modelling.html"><a href="introduction-to-modelling.html#is-canopy-height-related-to-habitat-type-at-osa"><i class="fa fa-check"></i><b>6.1</b> Is canopy height related to habitat type at Osa?</a><ul>
<li class="chapter" data-level="6.1.1" data-path="introduction-to-modelling.html"><a href="introduction-to-modelling.html#what-is-a-model"><i class="fa fa-check"></i><b>6.1.1</b> What is a model</a></li>
<li class="chapter" data-level="6.1.2" data-path="introduction-to-modelling.html"><a href="introduction-to-modelling.html#the-p-value"><i class="fa fa-check"></i><b>6.1.2</b> The P-value</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="introduction-to-modelling.html"><a href="introduction-to-modelling.html#are-coatis-more-abundant-in-close-proximity-to-the-ocean"><i class="fa fa-check"></i><b>6.2</b> Are Coatis more abundant in close proximity to the ocean</a><ul>
<li class="chapter" data-level="6.2.1" data-path="introduction-to-modelling.html"><a href="introduction-to-modelling.html#comparing-multiple-predictors-of-coati-detections"><i class="fa fa-check"></i><b>6.2.1</b> Comparing multiple predictors of Coati detections</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R: an introduction to data management and analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="real-world-data" class="section level1">
<h1><span class="header-section-number">5</span> Real world data</h1>
<p>We have now been through the basics of R and R studio. Today we apply it to a real world example - a camera trapping dataset collected at Osa Conservation. You will be confronted with real issues involved in preparing, exploring and analysing ecological data in R.</p>
<div id="data-organisation" class="section level2">
<h2><span class="header-section-number">5.1</span> Data organisation</h2>
<p>The more time I spend doing research, the more I realise that the majority of the problems we have performing data analysis can be solved with good organisation. When you are building your own data analysis data frame you should stick to my <strong>the 10 database commandments</strong>:</p>
<div id="the-10-database-commandments" class="section level3">
<h3><span class="header-section-number">5.1.1</span> The 10 database commandments</h3>
<ul>
<li><p><strong>The survey data collected with the same protocol should never be split by site/person collecting it/month of the year.</strong> Never ever split up datasets, it is a nightmare to fix. Have a column in the dataset that contains site ID/observer ID/Month instead.</p></li>
<li><p><strong>One line = one statistical unit</strong>. Do not pool data independent data into one line. In ecology, one statistical unit usually means one observation (i.e. spotting a species on a transect) - if you see two different species or two groups of the same species, use two lines. If you pool this data you going to waste time and losing important information.</p></li>
<li><p><strong>Never encode catagorical variables as 0 or 1</strong>. You will need a key to figure out what they mean in the future! Just use the actual levels - ie. yes/no or inside/outside (e.g. protected areas)</p></li>
<li><p><strong>Your database should only include data - no empty filler cells to look nice!</strong> Some people ‘pretty up’ their spreadhseet by including spaces… No thanks!</p></li>
<li><p><strong>Headers should only span one row</strong>. R can not handle more… listen to R.</p></li>
<li><p><strong>Be consistent!</strong> R treats the following as different: “Man”, “man”, " man“,”man ". This is a hassle to clean up!</p></li>
<li><p><strong>Include units in the column headings</strong>. There is nothing worse than characters included in a numerical column (e.g. 3 years) -&gt; R will read it as a character string!</p></li>
<li><p><strong>Don’t record coordinates in degrees, minutes, seconds.</strong> Decimal degrees are king. We are in the digital age - get out of the middle ages!</p></li>
<li><p><strong>Headings should be consise, but still understandable</strong>. No-one likes to type elephant$NameOfTheElephant every time they want to plot a graph.</p></li>
<li><p><strong>Never use commas when recording data!</strong></p></li>
</ul>
</div>
<div id="my-database-setup" class="section level3">
<h3><span class="header-section-number">5.1.2</span> My database setup</h3>
<p>I like to have four spreadhseets for each project: “data”, “effort”, “covariates”, and “species info”. Each sheet has at least one ‘key’ column to link it to data in other columns.</p>
<ul>
<li><p><strong>Data</strong> is a database of the observations or captures of a species and the additional information you record when they are observed (e.g body size, group size etc).</p></li>
<li><p><strong>Covariates</strong> is a database containing the locations of your survey points, and any additional site-level information about those sites for the analysis (altitude, proximity to roads etc.)</p></li>
<li><p><strong>Effort</strong> is a database recording the sampling events. If you were doing observational transects you would record a unique id for each time you walked a transect. For camera trapping it would be each time you deployed a trap in the same location.</p></li>
<li><p><strong>Species info</strong> is the sheet to link species codes in the main database to data about the species (e.g. latin names)</p></li>
</ul>
</div>
</div>
<div id="osa-data" class="section level2">
<h2><span class="header-section-number">5.2</span> Osa data</h2>
<p>We will explore the OsaGrid dataset. I’ll need your help to tell me basic summary information about this project and start the data exploration. I will (occasionally) give you some helpful hints. The idea is you apply some of the tools you learnt in the first two sessions to real world data!</p>
<p>The data are from a terrestrial camera trapping survey conducted in four different habitats: primary, secondary, plantation and agricultural land.</p>
<ul>
<li><p>OsaCTgrid_dat # Keys = ‘Code’ and ‘Station’</p></li>
<li><p>OsaCTgrid_covariates # Keys = ‘Station’</p></li>
<li><p>OsaCTgrid_effort # Keys = ‘Station’</p></li>
<li><p>OsaCTgrid_speciesinfo # Keys = ‘Code’</p></li>
</ul>
</div>
<div id="importing-a-dataframe-into-r-from-excel" class="section level2">
<h2><span class="header-section-number">5.3</span> Importing a dataframe into R from excel</h2>
<p>The only time I <strong>ever</strong> use excel is to enter my data. After today, you will hopefully be the same! Luckily, somebody has already entered this data for you. Check out the OsaCTgrid files, three of them are in .csv format, one of them, OsaCTgrid_data, is an excel file. R doesnt like excel files. We need to convert it first.</p>
<p>Open the excel documents ‘OsaCTgrid_data.xls’.</p>
<p>In excel, select File | Save as.. from the menu and navigate to the folder where you wish the file to be saved. Enter the file name (keep it the same for simplicity) in the ‘File name:’ dialogue box. In the ‘Save as Type:’ dialogue box click on the down arrow to open the drop down menu and select ‘csv (Comma delimited)’ as your file type. Select your R Project folder, the ‘ClassData’ folder and click Ok to save the file. Your file will now be saved as <em>OsaCTgrid_data.csv</em>.</p>
<p>This file can now be read directly into R using the <code>read.csv()</code> function.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb212-1" title="1">data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;ClassData/OsaCTgrid_data.csv&quot;</span>, <span class="dt">header =</span>T) <span class="co"># header = T tells R </span></a>
<a class="sourceLine" id="cb212-2" title="2">                                                            <span class="co"># that the data has column titles</span></a></code></pre></div>
<p><strong><em>TASK 11</em></strong>
<strong><em>Read in the other files. call them <code>effort</code>, <code>covariates</code> and <code>sp.info</code></em></strong></p>
<p><strong><em>REMEMBER TO MAKE NOTES</em></strong></p>
</div>
<div id="effort-exploration" class="section level2">
<h2><span class="header-section-number">5.4</span> Effort exploration</h2>
<p>The first thing I like to do with a dataset is figure out how many surveys were performed. This information is stored in our <code>effort</code> datasheet.</p>
<p><strong><em>TASK 12</em></strong>
<strong><em>Explore the structure of the <code>effort</code> sheet. What can you tell me about it? How many camera traps were working when collected (‘Status’ column)? What are the other categories?</em></strong>
<em>Hint: use <code>table()</code></em></p>
<pre><code>##   Station   date_set date_collected  Status
## 1   TCT01 13/05/2017     14/08/2017 working
## 2   TCT02 26/05/2017     14/08/2017 working
## 3   TCT03 18/05/2017     18/08/2017 working
## 4   TCT04 18/05/2017     16/08/2017 working
## 5   TCT05 18/05/2017     17/08/2017 working
## 6   TCT06   2/6/2017     17/08/2017 working</code></pre>
<pre><code>## 
##      camera broken camera setup error     SD not working            working 
##                  1                  1                  2                 56</code></pre>
<div id="dealing-with-dates" class="section level3">
<h3><span class="header-section-number">5.4.1</span> Dealing with dates</h3>
<p>We need to find out how many nights each camera was running. We have a start date (<code>date_set</code>) and an end date (<code>date_collected</code>). What is the easiest way to find out the effort?</p>
<p>R has an amazing <code>lubridate</code> package to make working with dates quick and easy. Read more about it here: <a href="https://lubridate.tidyverse.org/" class="uri">https://lubridate.tidyverse.org/</a></p>
<p><strong><em>Install the lubridate package</em></strong></p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb215-1" title="1"><span class="kw">library</span>(lubridate)</a></code></pre></div>
<p>The way that lubridate works is it automatically detects the format of your date, as long as you tell it the order of the days, months and years. If your date object was ‘y/m/d’ you would use the <code>ymd()</code> command, if it is ‘d/m/y’ you use the <code>dmy()</code> command.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb216-1" title="1">effort<span class="op">$</span>start &lt;-<span class="st"> </span><span class="kw">dmy</span>(effort<span class="op">$</span>date_set) <span class="co"># extract the date in d/m/y format</span></a></code></pre></div>
<p><strong><em>TASK 13</em></strong>
<strong><em>Repeat the same for the date collected, call it <code>effort$end</code>. Use the <code>head()</code> function to check it worked</em></strong>
If it work it should look like this:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb217-1" title="1"><span class="kw">head</span>(effort)</a></code></pre></div>
<pre><code>##   Station   date_set date_collected  Status      start        end
## 1   TCT01 13/05/2017     14/08/2017 working 2017-05-13 2017-08-14
## 2   TCT02 26/05/2017     14/08/2017 working 2017-05-26 2017-08-14
## 3   TCT03 18/05/2017     18/08/2017 working 2017-05-18 2017-08-18
## 4   TCT04 18/05/2017     16/08/2017 working 2017-05-18 2017-08-16
## 5   TCT05 18/05/2017     17/08/2017 working 2017-05-18 2017-08-17
## 6   TCT06   2/6/2017     17/08/2017 working 2017-06-02 2017-08-17</code></pre>
<p>Now to calculate the number of days the camera was functioning, we use the <code>interval()</code> command. The interval command works as <code>interval(start, end)/desired.unit(1)</code></p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb219-1" title="1"><span class="kw">interval</span>(effort<span class="op">$</span>start, effort<span class="op">$</span>end)<span class="op">/</span><span class="kw">days</span>(<span class="dv">1</span>) <span class="co"># days</span></a>
<a class="sourceLine" id="cb219-2" title="2"><span class="kw">interval</span>(effort<span class="op">$</span>start, effort<span class="op">$</span>end)<span class="op">/</span><span class="kw">weeks</span>(<span class="dv">1</span>) <span class="co"># weeks</span></a>
<a class="sourceLine" id="cb219-3" title="3"><span class="kw">interval</span>(effort<span class="op">$</span>start, effort<span class="op">$</span>end)<span class="op">/</span><span class="kw">years</span>(<span class="dv">1</span>) <span class="co"># weeks</span></a>
<a class="sourceLine" id="cb219-4" title="4"><span class="kw">interval</span>(effort<span class="op">$</span>start, effort<span class="op">$</span>end)<span class="op">/</span><span class="kw">seconds</span>(<span class="dv">1</span>) <span class="co"># seconds!</span></a></code></pre></div>
<p>Great! The result in days is the most useful. Hang on… what are we forgetting?</p>
<p><strong><em>TASK 13</em></strong>
<strong><em>Assign the result to a new column</em></strong></p>
<p><strong><em>TASK 14</em></strong>
<strong><em>What is the mean amount of time a camera was active? What is the maximum and the minimum? Hint: use summary()</em></strong></p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb220-1" title="1"><span class="kw">summary</span>(effort<span class="op">$</span>days)</a></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   33.00   92.75  106.00   99.27  108.00  110.00</code></pre>
</div>
<div id="remove-cameras-that-did-not-function" class="section level3">
<h3><span class="header-section-number">5.4.2</span> Remove cameras that did not function</h3>
<p>For this analysis we only want to analyse the camera stations which worked fully.</p>
<p><strong><em>TASK 15</em></strong>
<strong><em>Remove the cameras which were not working by until the end of the project</em></strong> * Hint: use the [ , ]’s with a logic statement.</p>
<p>Check that your subset worked. You should now have only 56 cameras, all of which have “working” in the ‘Status’ column</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb222-1" title="1"><span class="kw">table</span>(effort<span class="op">$</span>Status)</a></code></pre></div>
<pre><code>## 
##      camera broken camera setup error     SD not working            working 
##                  0                  0                  0                 56</code></pre>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb224-1" title="1"><span class="co"># Whenever you remove factors it is a good idea to &quot;reset the levels&quot;</span></a>
<a class="sourceLine" id="cb224-2" title="2"></a>
<a class="sourceLine" id="cb224-3" title="3">effort<span class="op">$</span>Status &lt;-<span class="st"> </span><span class="kw">factor</span>(effort<span class="op">$</span>Status)</a></code></pre></div>
<p><strong><em>TASK 14</em></strong>
<strong><em>Plot a boxplot of the amount of camera effort in the remaining camera stations</em></strong>
<em>Hint: use boxpolot()</em></p>
</div>
</div>
<div id="covariate-data" class="section level2">
<h2><span class="header-section-number">5.5</span> Covariate data</h2>
<p>We now need to see how the study is designed. The first thing to do is to explore the structure of the covariate dataframe. First, let’s remove the cameras that did not work.</p>
<p><strong><em>TASK 15</em></strong>
<strong><em>Subset the <code>covariates</code> data frame to only include camera stations in the updated <code>effort</code> dataframe.</em></strong> <em>Hint: Use [,] with a <code>%in%</code> logical statment.</em></p>
<p>If your command worked, you should now only have 56 camera stations in you <code>covariates</code> file.</p>
<p><strong><em>TASK 16</em></strong>
<strong><em>Explore the <code>covariates</code> database using <code>str()</code></em></strong>
<strong><em>What can you tell me about the covariate data frame?</em></strong> 1) How many columns do we have? 2) What format are the gps locations in? 3) How many cameras are located on/off trails? How many different habitats do we have?</p>
<pre><code>## [1] 14</code></pre>
<pre><code>## [1] N08°24&#39;36.1&quot; N08°24&#39;20.7&quot; N08°25&#39;14.7&quot; N08°24&#39;34.2&quot; N08°24&#39;37.4&quot;
## [6] N08°24&#39;48.4&quot;
## 59 Levels: N08°23&#39;47.8&quot; N08°23&#39;53.8&quot; N08°24&#39;00.2&quot; N08°24&#39;03.9&quot; ... N08°25&#39;44.5&quot;</code></pre>
<pre><code>## 
## off  on 
##  45  11</code></pre>
<p>Now lets check out the habitat types</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb228-1" title="1"><span class="kw">table</span>(covariates<span class="op">$</span>habitat_type)</a></code></pre></div>
<pre><code>## 
## agricultural matrix agricultural_matrix          plantation         plantation  
##                   1                   9                  10                   1 
##             primary            primary            secondary          secondary  
##                  17                   3                  11                   4</code></pre>
<p><strong>WHAT! 8 categories…! But you said that there were only 4!?!?!</strong> We have two different problems here! Agricultural matrix is spelt with and without an ’_’ and there are some blank spaces after several of the plantation, primary and secondary catagories. R sees all.</p>
<p><strong><em>TASK 17</em></strong>
<strong><em>Enter the following code</em></strong></p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb230-1" title="1"><span class="co"># Dealing with the missing underscore - use logic to correct it</span></a>
<a class="sourceLine" id="cb230-2" title="2"></a>
<a class="sourceLine" id="cb230-3" title="3"><span class="co"># Replace &quot;agricultural matrix&quot; with &quot;agricultural_matrix&quot;</span></a>
<a class="sourceLine" id="cb230-4" title="4">covariates<span class="op">$</span>habitat_type[covariates<span class="op">$</span>habitat_type<span class="op">==</span><span class="st">&quot;agricultural matrix&quot;</span>] &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb230-5" title="5"><span class="st">                                                                  &quot;agricultural_matrix&quot;</span></a>
<a class="sourceLine" id="cb230-6" title="6"></a>
<a class="sourceLine" id="cb230-7" title="7"><span class="co"># White space issues are very common, </span></a>
<a class="sourceLine" id="cb230-8" title="8"><span class="co"># there is a little bit of code to deal with it trimws()!</span></a>
<a class="sourceLine" id="cb230-9" title="9">covariates<span class="op">$</span>habitat_type &lt;-<span class="st"> </span><span class="kw">trimws</span>(covariates<span class="op">$</span>habitat_type)</a>
<a class="sourceLine" id="cb230-10" title="10"></a>
<a class="sourceLine" id="cb230-11" title="11"><span class="co"># Check that it worked</span></a>
<a class="sourceLine" id="cb230-12" title="12"><span class="kw">table</span>(covariates<span class="op">$</span>habitat_type)</a></code></pre></div>
<pre><code>## 
## agricultural_matrix          plantation             primary           secondary 
##                  10                  11                  20                  15</code></pre>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb232-1" title="1"><span class="co"># Hooray!</span></a></code></pre></div>
<div id="plotting-your-survey-sites---substr" class="section level3">
<h3><span class="header-section-number">5.5.1</span> Plotting your survey sites - Substr()</h3>
<p>Plotting GPS coordinates in R is exactly the same as doing a normal scatter plot. However, the first thing you need to do is ensure that your data are in decimal degrees. Unfornuately ours are in degrees, minutes seconds.</p>
<p>The calculation to convert DMS to decimal degress is relatively simple:</p>
<p><em>Decimal Degrees = (Seconds/3600) + (Minutes/60) + Degrees. </em></p>
<p>However to extract the data from our colums we will have to master the substring command <code>substr()</code>. First extract the first row of the <code>covariates$latitude</code> column and examine its structure.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb233-1" title="1">covariates<span class="op">$</span>latitude[<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] N08°24&#39;36.1&quot;
## 59 Levels: N08°23&#39;47.8&quot; N08°23&#39;53.8&quot; N08°24&#39;00.2&quot; N08°24&#39;03.9&quot; ... N08°25&#39;44.5&quot;</code></pre>
<p>If you count the number of latters from the first, the degree data are stored in the 2nd and 3rd characters, minutes in the 5th and 6th, and seconds data in the 8th-11th slots. <code>substr()</code> can extract these values <code>substr(data, start position, end position)</code>.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb235-1" title="1"><span class="co"># example of substring</span></a>
<a class="sourceLine" id="cb235-2" title="2"><span class="kw">substr</span>(covariates<span class="op">$</span>latitude[<span class="dv">1</span>], <span class="dv">2</span>,<span class="dv">3</span>) <span class="co"># extract the second and third values (degrees)</span></a></code></pre></div>
<pre><code>## [1] &quot;08&quot;</code></pre>
<p><strong><em>TASK 18</em></strong>
<strong><em>What is the problem?</em></strong>
The number is actually a character string as it is surrounded by "" quatation marks. <strong><em>Convert it to numeric</em></strong></p>
<p>Now we just plug the vlues into the equation (remembering to convert the output to <code>as.numeric</code>).</p>
<p><strong><em>Enter the following</em></strong></p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb237-1" title="1">covariates<span class="op">$</span>Y =<span class="st"> </span>(<span class="kw">as.numeric</span>(<span class="kw">substr</span>(covariates<span class="op">$</span>latitude, <span class="dv">8</span>,<span class="dv">11</span>)) <span class="op">/</span><span class="st"> </span><span class="dv">3600</span>) <span class="op">+</span><span class="st"> </span><span class="co"># seconds +</span></a>
<a class="sourceLine" id="cb237-2" title="2"><span class="st">               </span>(<span class="kw">as.numeric</span>(<span class="kw">substr</span>(covariates<span class="op">$</span>latitude, <span class="dv">5</span>,<span class="dv">6</span> ))  <span class="op">/</span><span class="st"> </span><span class="dv">60</span>) <span class="op">+</span><span class="st">  </span><span class="co"># minutes +</span></a>
<a class="sourceLine" id="cb237-3" title="3"><span class="st">                </span><span class="kw">as.numeric</span>(<span class="kw">substr</span>(covariates<span class="op">$</span>latitude, <span class="dv">2</span>,<span class="dv">3</span> ))           <span class="co"># degrees</span></a></code></pre></div>
<p><strong><em>TASK 19</em></strong>
<strong><em>Do the same for the longitude data. assign it to column <code>X</code></em></strong>
<em>HINT: Be careful, the character positions change! And multiple by -1 as it is a “west” coordinate.</em></p>
<pre><code>## [1] W083°19&#39;49.5&quot;
## 59 Levels: W083°18&#39;41.8&quot; W083°18&#39;51.2&quot; W083°18&#39;52.1&quot; ... W083°21.11.1</code></pre>
<p>Now we can do a standard scatter plot of our data…. with one difference. Whenever you map things in R you should lock the aspect ratio to 1 (<code>asp=1</code>) or the map will look strange!</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb239-1" title="1"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb239-2" title="2"><span class="kw">plot</span>(covariates<span class="op">$</span>Y<span class="op">~</span>covariates<span class="op">$</span>X, <span class="dt">pch=</span><span class="dv">19</span>,<span class="dt">asp=</span><span class="dv">1</span>) </a>
<a class="sourceLine" id="cb239-3" title="3"><span class="kw">plot</span>(covariates<span class="op">$</span>Y<span class="op">~</span>covariates<span class="op">$</span>X, <span class="dt">pch=</span><span class="dv">19</span>) </a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-159-1.png" width="336" /></p>
<p><strong><em>TASK 20</em></strong>
<strong><em>Smarten up your graph! Try adding separate shapes for each different habitat</em></strong>
<em>Hint: start with a blank plot (<code>type="n"</code>), then sequentially add the points for the different habitats using <code>points()</code> and the logic statement covariates$Habitat_type==</em><br />
Try to make something like this:</p>
<p><img src="_main_files/figure-html/unnamed-chunk-160-1.png" width="432" /></p>
<p>It is relatively simple to add shape files to plots like these using the “Simple Features” package. All the clever ways to use the Simple Features would be a couse in itself. Now lets just use it to make a nice graph.</p>
<p><strong><em>The first step is to load the package and the shapefiles</em></strong></p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb240-1" title="1"><span class="kw">library</span>(sf)</a></code></pre></div>
<pre><code>## Warning: package &#39;sf&#39; was built under R version 3.6.3</code></pre>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb242-1" title="1">trails    &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;ClassData/Map Files/Trails.shp&quot;</span>, <span class="dt">stringsAsFactors =</span> F)</a>
<a class="sourceLine" id="cb242-2" title="2">roads     &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;ClassData/Map Files/Roads.shp&quot;</span>, <span class="dt">stringsAsFactors =</span> F)</a>
<a class="sourceLine" id="cb242-3" title="3">rivers    &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;ClassData/Map Files/Rivers.shp&quot;</span>, <span class="dt">stringsAsFactors =</span> F)</a>
<a class="sourceLine" id="cb242-4" title="4">country   &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;ClassData/Map Files/Country.shp&quot;</span>, <span class="dt">stringsAsFactors =</span> F)</a></code></pre></div>
<p>When making maps, it is best to start the plot with the survey sites, then add the layers on top. This is the esiest way to ensure that the plot window is appropriately sized.</p>
<p>To plot Simple Features shapefiles you need to specify that you want to plot the geometry of the object: st_geometry. See below:</p>
<p><img src="_main_files/figure-html/unnamed-chunk-162-1.png" width="432" /></p>
</div>
<div id="explore-your-covariates" class="section level3">
<h3><span class="header-section-number">5.5.2</span> Explore your covariates</h3>
<p>We have 7 covariates in this data which could explain some variation in mammal abundance detected on camera traps. We should explore them.</p>
<p><strong><em>TASK 21</em></strong>
*** How are the covariates river dist, ocean_dist, road_dist, altitude, canopy_cover, and canopy_height related to one another?***
<em>Hint: Use the <code>corrplot</code> package to calculate the covariance between the explanatory variables.</em>
What do you think about the correlations? Are we worrid about anything?</p>
<p><img src="_main_files/figure-html/unnamed-chunk-163-1.png" width="672" /></p>
</div>
</div>
<div id="camera-trap-data" class="section level2">
<h2><span class="header-section-number">5.6</span> Camera trap data</h2>
<p>We will now clean and look at the camera trap data.</p>
<p><strong><em>TASK 22</em></strong>
<strong><em>Remove the data from the cameras that did not work until the end</em></strong></p>
<p>*** Remove the data from the cameras which did not survive until the end of the study.***</p>
<p><em><strong>TASK 23</strong>
</em><strong>Have a look at the structure of the <code>data</code> dataframe and tell me what you see.</strong>* How many observations do we have in the camera trap dataframe? How many different species classifications do we have? <em>Hint</em> use <code>nrow()</code> to find out how many rows are in <code>data</code>.</p>
<p>A useful comman to know is <code>as.dataframe()</code> as it can turn a table output, into a more easily observable dataframe.</p>
<p><strong><em>TASK 24</em></strong>
<strong><em>Run the following code</em></strong></p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb243-1" title="1">det.freq &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">table</span>(data<span class="op">$</span>Code)) <span class="co"># Make a table into a dataframe</span></a></code></pre></div>
<p>You dataframe should look like this (but longer):</p>
<pre><code>##                    Var1 Freq
## 1                agouti 2490
## 2                Agouti   20
## 3             ants_army    1
## 4  armadillo_ninebanded  142
## 5                  bike    6
## 6        bird_large_uid    1
## 7        bird_small_uid  635
## 8                broken   10
## 9   capuchin_whitefaced   17
## 10     caracara_crested    1
## 11                coati  335
## 12                Coati    0</code></pre>
<p>Doing this we can see that we have some issues. Agouti appears twice (“agouti” and “Agouti”), and coati appears twice as (“Coati” and “coati”). Luckily there is a nice command to deal with this <code>tolower()</code>!</p>
<p><strong><em>TASK 25</em></strong>
<strong><em>Convert the errors to lowercase</em></strong></p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb245-1" title="1">data<span class="op">$</span>Code &lt;-<span class="st"> </span><span class="kw">tolower</span>(data<span class="op">$</span>Code)    </a></code></pre></div>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb246-1" title="1"><span class="co"># Always check you code has worked!</span></a>
<a class="sourceLine" id="cb246-2" title="2"><span class="kw">as.data.frame</span>(<span class="kw">table</span>(data<span class="op">$</span>Code))[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,]</a>
<a class="sourceLine" id="cb246-3" title="3"><span class="kw">length</span>(<span class="kw">unique</span>(data<span class="op">$</span>Code)) <span class="co"># 53 species classification</span></a></code></pre></div>
<div id="subsetting-you-data-to-only-include-species-of-interest." class="section level3">
<h3><span class="header-section-number">5.6.1</span> Subsetting you data to only include species of interest.</h3>
<p>As you have seen, we have 54 different species classifications, but some of those are birds, humans, even ‘bike’. This is where the <code>sp.info</code> dataframe comes in.</p>
<p><strong><em>TASK 26</em></strong>
<strong><em>Explore the structure of the sp.info dataframe</em></strong></p>
<pre><code>##                   Code Mammal Native              Species
## 1               agouti    yes    yes  Dasyprocta punctata
## 2            ants_army     no    yes                 &lt;NA&gt;
## 3 armadillo_ninebanded    yes    yes Dasypus novemcinctus
## 4                 bike     no     no                 &lt;NA&gt;
## 5       bird_large_uid     no    yes                 &lt;NA&gt;
## 6       bird_small_uid     no    yes                 &lt;NA&gt;</code></pre>
<pre><code>##  [1] &quot;agouti&quot;                  &quot;bird_small_uid&quot;         
##  [3] &quot;capuchin_whitefaced&quot;     &quot;coati&quot;                  
##  [5] &quot;heron_barethroatedtiger&quot; &quot;nothing&quot;                
##  [7] &quot;opossum_foureyed&quot;        &quot;opossum_uid&quot;            
##  [9] &quot;opossum_water&quot;           &quot;paca&quot;                   
## [11] &quot;people&quot;                  &quot;raccoon&quot;                
## [13] &quot;setup&quot;                   &quot;tamandua&quot;               
## [15] &quot;uid&quot;                     &quot;curassow_great&quot;         
## [17] &quot;grison&quot;                  &quot;horse&quot;                  
## [19] &quot;mammal_small_uid&quot;        &quot;opossum_common&quot;         
## [21] &quot;peccary_collared&quot;        &quot;puma&quot;                   
## [23] &quot;skunk_striped&quot;           &quot;woodrail_greynecked&quot;    
## [25] &quot;bird_large_uid&quot;          &quot;hawk_roadside&quot;          
## [27] &quot;armadillo_ninebanded&quot;    &quot;tinamou_great&quot;          
## [29] &quot;cow&quot;                     &quot;egret_cattle&quot;           
## [31] &quot;ocelot&quot;                  &quot;squirrel_uid&quot;           
## [33] &quot;tapir&quot;                   &quot;caracara_crested&quot;       
## [35] &quot;ibis_white&quot;              &quot;vulture_black&quot;          
## [37] &quot;lizard_uid&quot;              &quot;jaguarundi&quot;             
## [39] &quot;tayra&quot;                   &quot;dog&quot;                    
## [41] &quot;iguana_green&quot;            &quot;ants_army&quot;              
## [43] &quot;peccary_whitelipped&quot;     &quot;tinamou_little&quot;         
## [45] &quot;margay&quot;                  &quot;motmot_bluecrowned&quot;     
## [47] &quot;jaguar&quot;                  &quot;guan_crested&quot;           
## [49] &quot;forestfalcon_collared&quot;   &quot;broken&quot;                 
## [51] &quot;scorpion_bark&quot;           &quot;bike&quot;                   
## [53] &quot;horse_ridden&quot;</code></pre>
<p>For this analysis, we want to subset the data to just mammals, which are native, and can be identified to genus level.</p>
<p><strong><em>TASK 27</em></strong>
<strong><em>Write a line of code which allows us to subset <code>sp.info</code> to a new dataframe called <code>focal.info</code> based off the above criteria.</em></strong>
<em>Hint: use <code>[,]</code> and multiple logic statements linked by the ‘&amp;’ sign. Remember, to deal with NA’s you will need to do the ‘is.na()’ command.</em></p>
<pre><code>## [1] 21</code></pre>
<p>If you have performed your operation correctly, your sp.focal dataset should contain 21 species.</p>
<p>*** Now subset the <code>data</code> dataframe to only contain the species in your ’<code>focal.info</code> database. Assign it to a new dataset - final.data ***</p>
<pre><code>##                             Name Station                Code
## 47 2017-07-02 12.55.24_00047.AVI    CT02              agouti
## 48 2017-08-11 09.07.34_00048.AVI    CT02              agouti
## 49 2017-08-13 09.25.20_00049.AVI    CT02              agouti
## 50 2017-08-13 13.01.38_00050.AVI    CT02              agouti
## 51 2017-08-14 08.57.04_00051.AVI    CT02              agouti
## 53 2017-06-23 13.28.04_00053.AVI    CT02 capuchin_whitefaced</code></pre>
</div>
<div id="extracting-time-and-date-information" class="section level3">
<h3><span class="header-section-number">5.6.2</span> Extracting time and date information</h3>
<p>When ever you have observatiosn you should record the times and dates. We dont currently have that information in the <code>final.data</code> dataframe.</p>
<p>In the <code>effort</code> sheet we extracted date information using <code>lubridate()</code>. We can do exactly the same thing here as the dates and times are embedded in the filenames column <code>final.data$Name</code>.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb251-1" title="1">final.data<span class="op">$</span>Name[<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] 2017-07-02 12.55.24_00047.AVI
## 11906 Levels: 2017-04-03 14.38.28_01513.AVI ... 2017-08-20 06.52.14_12082.AVI</code></pre>
<p>Examining the first element in the dataframe you can see that the first 19 characters contain the the date and time information in the format ‘Y-m-d H.M.S’.</p>
<p><strong><em>TASK 28</em></strong>
*** Write a command to extract the first 19 characters from <code>final.data$Name</code>.
<em>Hint: use substr()</em></p>
<p><strong><em>Next, convert that object to an R date column called <code>final.data$Date</code> using lubridate - <code>ymd_hms()</code></em></strong></p>
<p>If you have run the code correctly the top of you dataset should now look like this:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb253-1" title="1"><span class="kw">head</span>(final.data)</a></code></pre></div>
<pre><code>##                             Name Station                Code
## 47 2017-07-02 12.55.24_00047.AVI    CT02              agouti
## 48 2017-08-11 09.07.34_00048.AVI    CT02              agouti
## 49 2017-08-13 09.25.20_00049.AVI    CT02              agouti
## 50 2017-08-13 13.01.38_00050.AVI    CT02              agouti
## 51 2017-08-14 08.57.04_00051.AVI    CT02              agouti
## 53 2017-06-23 13.28.04_00053.AVI    CT02 capuchin_whitefaced
##                   Date
## 47 2017-07-02 12:55:24
## 48 2017-08-11 09:07:34
## 49 2017-08-13 09:25:20
## 50 2017-08-13 13:01:38
## 51 2017-08-14 08:57:04
## 53 2017-06-23 13:28:04</code></pre>
<p>We can use this information to explore animal activity patterns. To do that we need to extract the an “hour” column from the <code>final.data$Date</code> information. Lubridate makes this nice and easy.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" title="1">final.data<span class="op">$</span>Hour &lt;-<span class="st"> </span><span class="kw">hour</span>(final.data<span class="op">$</span>Date) <span class="op">+</span><span class="st"> </span><span class="kw">minute</span>(final.data<span class="op">$</span>Date)<span class="op">/</span><span class="dv">60</span> </a></code></pre></div>
<p><strong><em>TASK 29</em></strong>
<strong><em>Plot a histogram of of the times recorded in the hour category and specify hourly breaks.</em></strong> What can you tell me about when animals are usually captured?
<em>Hint: use <code>hist</code> for the plot and <code>seq()</code> to determine the breaks.</em></p>
<p><strong><em>TASK 30</em></strong>
*** Repeat this graph using the data for two species of your choice. Try a diurnal mammal and a nocturnal mammal (paca, possum_foureyed. Share your graphs with the class**<em>
</em>Hint: subset the data using the [,] and a logic statement e.g. final.data<span class="math inline">\(Hour[final.data\)</span>Code==“tapir”]. Remember to change the title! Edit the code below.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb256-1" title="1"><span class="kw">hist</span>(final.data<span class="op">$</span>Hour[final.data<span class="op">$</span>Code<span class="op">==</span><span class="st">&quot;tapir&quot;</span>],  <span class="co"># Specify the data</span></a>
<a class="sourceLine" id="cb256-2" title="2">     <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">24</span>,<span class="dv">1</span>),                         <span class="co"># Specify the breaks</span></a>
<a class="sourceLine" id="cb256-3" title="3">     <span class="dt">main =</span> <span class="st">&quot;Tapir detection frequency&quot;</span>, <span class="co"># change the title </span></a>
<a class="sourceLine" id="cb256-4" title="4">     <span class="dt">las=</span><span class="dv">1</span>,                                      <span class="co"># Rotate the y axis labels (essential!!!!)</span></a>
<a class="sourceLine" id="cb256-5" title="5">     <span class="dt">xlab=</span><span class="st">&quot;Hour&quot;</span>)                                <span class="co"># Label the x-axis</span></a></code></pre></div>
<p><img src="_main_files/figure-html/echo-1.png" width="672" /></p>
</div>
</div>
<div id="building-analysis-dataframes" class="section level2">
<h2><span class="header-section-number">5.7</span> Building analysis dataframes</h2>
<p>So far we have explored our four different datasheets, but now we need to build the final analysis dataframes. To do that we need to decide what we want to study, and then define what out statistical unit is.</p>
<p><strong><em>TASK 31</em></strong>
<strong><em>Come up with some questions to ask</em></strong></p>
<div id="relative-abundance" class="section level3">
<h3><span class="header-section-number">5.7.1</span> Relative abundance</h3>
<p>we could hypothesise that the more degraded a habitat is, the fewer animals you will find there. We have four habitat types so we might think that:</p>
<p>Primary &gt; Secondary &gt; Plantation &gt; agricultural_matrix</p>
<p>As we are interested in the abundance of mammals in the different habitats, I could just add up all of the detections of a given species in a habitat, and compare those between habitat types. <strong><em>Is there a problem with that?</em></strong></p>
<p>Remember the camera effort boxplot from earlier:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb257-1" title="1"><span class="kw">boxplot</span>(effort<span class="op">$</span>days,<span class="dt">ylab=</span><span class="st">&quot;Camera trap days&quot;</span>, <span class="dt">las=</span><span class="dv">1</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-178-1.png" width="288" /></p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb258-1" title="1"><span class="kw">summary</span>(effort<span class="op">$</span>days)</a></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   54.00   92.75  106.00   99.91  108.00  110.00</code></pre>
<p>Some cameras were active for 110 days, th rest for less. If we were to just add up the number of captures, the cameras with half the amount of effort will have half as many captures, regardless of that habitat they are in.</p>
<p>Consequently, we need to standardise our counts to <strong>relative abundance</strong> of mammals: the number of detections per unit time (usually 100 camera trap days). Fortunately, this is relatively simple:</p>
<p>For each camera -&gt; sum(all detections) / effort.days * 100</p>
<p>The steps we need to take are:</p>
<ol style="list-style-type: decimal">
<li><p>Summarise the <code>data</code> file to count every observation and store it in a new dataframe</p></li>
<li><p>Merge the count data with the <code>effort</code> file - so we can calculate the relative abundance index</p></li>
<li><p>Merge the new count data file with the <code>covariates</code> file so we can explore how our covariates influence mammal abundance.</p></li>
</ol>
<p>In this case the “statistical unit” we are interested in (remember point 2 of the 9 commandments) is the camera. So we want to summarise this data so that one row = one camera station.</p>
</div>
<div id="step-1-summarise" class="section level3">
<h3><span class="header-section-number">5.7.2</span> Step 1: Summarise</h3>
<p>There are some very simple functions in the <code>dplyr</code> to summarise data. the <code>summarize()</code> function is a good one to know.</p>
<p>The <code>summarize()</code> function works by summarize(group_by(data, group 1, group 2 etc), “column name” = the action you want to perform)</p>
<p>We will produce the summary for each species:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb260-1" title="1"><span class="kw">library</span>(reshape2)</a>
<a class="sourceLine" id="cb260-2" title="2">final.data<span class="op">$</span>Code&lt;-<span class="st"> </span><span class="kw">factor</span>(final.data<span class="op">$</span>Code)</a>
<a class="sourceLine" id="cb260-3" title="3"></a>
<a class="sourceLine" id="cb260-4" title="4">count.sp &lt;-<span class="st"> </span><span class="kw">melt</span>(<span class="kw">table</span>(final.data<span class="op">$</span>Station, final.data<span class="op">$</span>Code))</a>
<a class="sourceLine" id="cb260-5" title="5"><span class="kw">colnames</span>(count.sp) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Station&quot;</span>, <span class="st">&quot;Code&quot;</span>, <span class="st">&quot;Count&quot;</span>)</a>
<a class="sourceLine" id="cb260-6" title="6"><span class="kw">head</span>(count.sp)</a></code></pre></div>
<pre><code>##   Station   Code Count
## 1    CT02 agouti     5
## 2    CT03 agouti     1
## 3    CT04 agouti     1
## 4    CT06 agouti    45
## 5    CT07 agouti   154
## 6    CT08 agouti     0</code></pre>
<p>If you performed this operation correctly it should look like the following:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb262-1" title="1"><span class="kw">head</span>(count.sp)</a></code></pre></div>
<pre><code>##   Station   Code Count
## 1    CT02 agouti     5
## 2    CT03 agouti     1
## 3    CT04 agouti     1
## 4    CT06 agouti    45
## 5    CT07 agouti   154
## 6    CT08 agouti     0</code></pre>
</div>
<div id="step-2-merge-with-effort" class="section level3">
<h3><span class="header-section-number">5.7.3</span> Step 2: Merge with effort</h3>
<p>Next we need to merge our data with the effort data.
To merge with the effort sheet we can use the <code>Station</code> key and the <code>left_join()</code> command. We dont want to use all the columns in the <code>effort</code> sheets as things will get messy. Lets subset it first:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb264-1" title="1"><span class="co"># First subset the effort file to just the columns you want to merge - &#39;Station&#39; and &#39;days&#39;</span></a>
<a class="sourceLine" id="cb264-2" title="2">effort[, <span class="kw">c</span>(<span class="st">&quot;Station&quot;</span>, <span class="st">&quot;days&quot;</span>)] <span class="co"># literally, give me all rows, </span></a>
<a class="sourceLine" id="cb264-3" title="3"><span class="co">#but just the station and days columns</span></a>
<a class="sourceLine" id="cb264-4" title="4"></a>
<a class="sourceLine" id="cb264-5" title="5"><span class="co"># Join your reduced data frame with the count data</span></a>
<a class="sourceLine" id="cb264-6" title="6">count.sp &lt;-<span class="st"> </span><span class="kw">left_join</span>(count.sp, effort[, <span class="kw">c</span>(<span class="st">&quot;Station&quot;</span>, <span class="st">&quot;days&quot;</span>)], <span class="dt">by=</span><span class="st">&quot;Station&quot;</span>)</a></code></pre></div>
<pre><code>##    Station days
## 1    TCT01   93
## 2    TCT02   80
## 3    TCT03   92
## 4    TCT04   90
## 5    TCT05   91
## 6    TCT06   76
## 7    TCT07   75
## 8    TCT08   74
## 9    TCT09   76
## 11    CT02  108</code></pre>
<pre><code>## Warning: Column `Station` joining factors with different levels, coercing to
## character vector</code></pre>
<p>Your final job is to calculate the <strong>R</strong>elative <strong>A</strong>bundance <strong>I</strong>ndex or <strong>RAI</strong>.</p>
<p>For <code>count.sp</code>, we need to divide the counts by the number of trapping days and times it by 100 (to get the number of captures per 100 days).</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb267-1" title="1">count.sp<span class="op">$</span>RAI &lt;-<span class="st"> </span>count.sp<span class="op">$</span>Count<span class="op">/</span>count.sp<span class="op">$</span>days <span class="op">*</span><span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb267-2" title="2"><span class="co"># all of those decimal places are annoying... remove them using round()</span></a>
<a class="sourceLine" id="cb267-3" title="3">count.sp<span class="op">$</span>RAI &lt;-<span class="st"> </span><span class="kw">round</span>(count.sp<span class="op">$</span>RAI,<span class="dv">2</span>)</a></code></pre></div>
</div>
<div id="step-3-merge-the-covariates" class="section level3">
<h3><span class="header-section-number">5.7.4</span> Step 3: Merge the covariates</h3>
<p>So we now have a dataset on relative abundance index which we want to analyse, but we dont have any information about the sites themselves. We need to add the covariate data. To use column names on all of these would take a long time, we can use numbers instead. The columns we want are: 1 = station, then 4:12 (the covariates: habitat_type:canopy height).</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb268-1" title="1"><span class="co"># Check the covariate subset </span></a>
<a class="sourceLine" id="cb268-2" title="2">covariates[,<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span><span class="op">:</span><span class="dv">12</span>)] <span class="co"># I have all the columns I want</span></a></code></pre></div>
<p><strong><em>TASK 35</em></strong>
<strong><em>Perform the <code>left_join</code> but with covariate data.</em></strong></p>
<pre><code>## Warning: Column `Station` joining character vector and factor, coercing into
## character vector</code></pre>
<p>All being well your dataset should now look like this:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb270-1" title="1"><span class="kw">head</span>(count.sp)</a></code></pre></div>
<pre><code>##   Station   Code Count days    RAI        habitat_type trail river_dist
## 1    CT02 agouti     5  108   4.63 agricultural_matrix   off       1631
## 2    CT03 agouti     1  110   0.91 agricultural_matrix   off        644
## 3    CT04 agouti     1  110   0.91 agricultural_matrix   off       1148
## 4    CT06 agouti    45   85  52.94           secondary   off        219
## 5    CT07 agouti   154  108 142.59 agricultural_matrix   off       1589
## 6    CT08 agouti     0  106   0.00 agricultural_matrix   off       1378
##   ocean_dist road_dist trail_dist altitude canopy_cover canopy_height        Y
## 1        252       582        104       12        70.25        10.435 8.403389
## 2        201        96        160        1        22.90         5.697 8.400056
## 3        230       133        165        6         6.44         9.953 8.401778
## 4        135       499        116       14        38.71         7.239 8.396611
## 5        787       767         46       13        15.62         9.746 8.409278
## 6        760       256        194       19        20.41         7.065 8.407500
##           X
## 1 -83.35386
## 2 -83.34536
## 3 -83.34972
## 4 -83.33697
## 5 -83.35625
## 6 -83.35169</code></pre>
<p>We will also make a site*species matrix so we can explore relationships between multiple different species.</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb272-1" title="1">count.mat &lt;-<span class="st"> </span><span class="kw">dcast</span>(count.sp, Station  <span class="op">~</span><span class="st"> </span>Code,<span class="dt">value.var =</span><span class="st">&quot;Count&quot;</span>, <span class="dt">fun.aggregate=</span>sum, <span class="dt">drop=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p>Save the count.sp dataset for later.</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb273-1" title="1"><span class="kw">write.csv</span>(count.sp, <span class="st">&quot;SpeciesRAIdata.csv&quot;</span>, <span class="dt">row.names=</span>F)</a>
<a class="sourceLine" id="cb273-2" title="2"><span class="kw">write.csv</span>(count.mat, <span class="st">&quot;SpeciesMATRIXdata.csv&quot;</span>, <span class="dt">row.names=</span>F)</a></code></pre></div>
<p><strong>We are now ready for some proper data exploration</strong></p>
</div>
</div>
<div id="real-data-exploration" class="section level2">
<h2><span class="header-section-number">5.8</span> Real data exploration</h2>
<p><strong><em>Team Task</em></strong>
I have never analysed this data, I have no idea what it will tell us.</p>
<p><strong><em>Break into groups and summarise the data in these datasets.</em></strong></p>
<p>Questions:</p>
<ul>
<li>What are the most commonly detected species?</li>
</ul>
<p>Hints:
- Scatterplots of continuous variables with RAI (<code>plot()</code>)
- Boxplots of catagorical variables with RAI (<code>boxplot()</code>)
- Boxplots of catagorical covariates with Habitat_type (<code>boxplot</code>)</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="advanced-coding.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-modelling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
